# club-calendar

部活動の集会に関するデータを管理する API と、それを表示するウェブサイトを提供するプロジェクト。


# ウェブサイト

スケジュールの入ったカレンダーが表示される。

集会の追加ボタンを押すと画面が開き、集会の設定と追加ができる。

スケジュール上の集会をクリックすると画面が開き、集会の設定と中止ができる。


# API

サーバーの `/api/` ディレクトリ下の以下のものにアクセスして集会データを扱える。

## 使い方

### 取得

`GET /api/meetings` に以下のクエリを付けてアクセスする。

正常なクエリ引数を渡さないと `400 Bad Request` を返す。

| 引数 | 意味                                                   |
| ---- | ------------------------------------------------------ |
| kind | 取得する集会の種別で、`Regular` か `Others` にできる。 |
| from | 日時の文字列で、これ以降の集会を取得する。             |
| to   | 日時の文字列で、これ以前の集会を取得する。             |

`200 OK` と以下のような JSON を返す。

```json
{
  "meetings": [
    {
      "_id": "hoge",
      "kind": "Others",
      "name": "ホゲ談義",
      "date": "2019-12-12T12:12:00",
      "expired": false
    }
  ]
}
```

### 作成

`POST /api/create` に以下の JSON を付けてアクセスする。

正常な本文を渡さないと `400 Bad Request` を返す。

```json
{
  "kind": "Others",
  "name": "ホゲ談義",
  "date": "2019-12-12T12:12:00"
}
```

作成に成功すると、`201 Created` と以下のような JSON を返す。

```json
{
  "ids": [
    "hoge"
  ]
}
```

### 更新

`PUT /api/update/id` に以下の JSON を付けてアクセスする。

正常な本文を渡さないと `400 Bad Request` を返す。

`_id` は必須だが、それ以外は更新したい属性だけを渡す。

```json
{
  "kind": "Others",
  "name": "ホゲ談義",
  "date": "2019-12-12T12:12:00"
}
```

更新に成功すると `202 Accpeted` を返す。

### 中止

`PUT /api/abort/[id]` に以下の JSON を付けてアクセスする。

正常な本文を渡さないと `400 Bad Request` を返す。

`_id` だけを渡す。

```json
{
  "_id": "hoge"
}
```

更新に成功すると、`202 Accepted` を返す。
